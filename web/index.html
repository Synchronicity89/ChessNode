<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chess Play</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <h1>Chess Play</h1>
    <nav>
      <a href="index.html">Play</a>
      <a href="engine-config.html">Config</a>
      <a href="engine-explorer.html">Explorer</a>
      <a href="engine-dev.html">Dev</a>
    </nav>
  </header>
  <main class="layout">
    <section class="board-panel">
      <div id="board" class="board-placeholder">Board will render here</div>
      <div class="controls">
  <button id="newGame" class="primary">New Game</button>
        <label>
          Side:
          <select id="sideSelect">
            <option value="white">White</option>
            <option value="black">Black</option>
            <option value="observe">Observe (Engine vs Engine)</option>
          </select>
        </label>
        <label>
          Engine Mode:
          <select id="engineMode">
            <option value="random">Random</option>
            <option value="greedy1">Greedy 1-ply (uses Evaluation)</option>
          </select>
        </label>
        <label>
          Depth:
          <input id="depth" type="number" value="10" min="1" max="99" />
        </label>
        <label>
          Show PV <input id="showPv" type="checkbox" checked>
        </label>
        <label>
          Hide Board (Fast) <input id="hideBoard" type="checkbox">
        </label>
      </div>
    </section>
    <section class="sidebar">
      <h2>Moves</h2>
      <ol id="moveList"></ol>
      <h2>Score</h2>
      <div id="score">--</div>
  <div id="engineStatusRow">Engine: <span id="engineStatus">detectingâ€¦</span></div>
      <h2>Evaluation</h2>
      <div id="evalControls">
        <h3>Opponent model</h3>
        <div class="row">
          <label>Opponent ply depth <input id="opp_ply_depth" type="number" value="4" min="0" max="64"></label>
          <label>Trade ply equivalent <input id="trade_ply_eq" type="number" value="0.5" step="0.1" min="0" max="1"></label>
        </div>

        <div class="row"><label>P <input id="w_p" type="number" value="100" step="10"></label>
          <label>N <input id="w_n" type="number" value="300" step="10"></label>
          <label>B <input id="w_b" type="number" value="300" step="10"></label></div>
        <div class="row"><label>R <input id="w_r" type="number" value="500" step="10"></label>
          <label>Q <input id="w_q" type="number" value="900" step="10"></label>
          <label>K <input id="w_k" type="number" value="0" step="10"></label></div>
        <div class="row"><label><input id="t_material" type="checkbox" checked> Material</label>
          <label><input id="t_tempo" type="checkbox"> Tempo</label>
          <label>Tempo cp <input id="tempo_cp" type="number" value="10" step="1"></label></div>

        <h3>Risk model</h3>
        <div class="row">
          <label>Risk type
            <select id="risk_type">
              <option value="exponential">Exponential</option>
              <option value="logistic">Logistic</option>
            </select>
          </label>
          <label>kAt2x <input id="risk_k2x" type="number" value="100" step="1" min="1"></label>
          <label>Logistic slope <input id="risk_slope" type="number" value="5" step="0.5"></label>
          <label>Logistic midpoint xD <input id="risk_mid" type="number" value="1.0" step="0.1"></label>
        </div>
        <div class="row">
          <label>riskPow <input id="risk_pow" type="number" value="1.0" step="0.1"></label>
          <label>gainScale <input id="gain_scale" type="number" value="1.0" step="0.1"></label>
          <label>lossScale <input id="loss_scale" type="number" value="1.0" step="0.1"></label>
          <label>blendAlpha <input id="blend_alpha" type="number" value="1.0" step="0.1" min="0" max="1"></label>
        </div>

        <h3>Board geometry</h3>
        <div class="row">
          <label>Center placement reward <input id="center_reward" type="number" value="50" step="5"></label>
          <label>King center magnet <input id="king_center_mag" type="number" value="15" step="1"></label>
        </div>

        <h3>Development</h3>
        <div class="row">
          <label>Rank attack factor <input id="rank_attack_factor" type="number" value="1.1" step="0.05"></label>
          <label>Development incentive <input id="dev_incentive" type="number" value="10" step="1"></label>
          <label><input id="threat_occupied" type="checkbox" checked> Count threatened occupied squares</label>
        </div>

        <h3>King and mate values</h3>
        <div class="row">
          <label>King (engine) cp <input id="king_engine_cp" type="number" value="7000" step="100"></label>
          <label>King (opponent) cp <input id="king_opponent_cp" type="number" value="5000" step="100"></label>
        </div>

        <details>
          <summary>Advanced (per-operation knobs)</summary>
          <div class="row">
            <label>Development gamma <input id="dev_gamma" type="number" value="1.0" step="0.1"></label>
            <label>Endgamishness pow <input id="endg_pow" type="number" value="1.0" step="0.1"></label>
            <label>King-center improvement pow <input id="kc_imp_pow" type="number" value="1.0" step="0.1"></label>
          </div>
          <div class="row">
            <label>Mix weight center <input id="mix_w_center" type="number" value="1.0" step="0.1"></label>
            <label>Mix weight king-center <input id="mix_w_kcenter" type="number" value="1.0" step="0.1"></label>
            <label>Mix weight development <input id="mix_w_dev" type="number" value="1.0" step="0.1"></label>
            <label>Mix weight risk <input id="mix_w_risk" type="number" value="1.0" step="0.1"></label>
          </div>
        </details>
        <div class="row">
          <button id="saveEval">Save Eval Settings</button>
          <button id="applyEval">Apply Now</button>
        </div>
      </div>
      <div class="io">
        <button id="savePgn" data-pages-incompatible title="Saves to local file (not available on static host)">Save PGN</button>
        <button id="loadPgn" data-pages-incompatible title="Loads from local file (not available on static host)">Load PGN</button>
        <button id="loadFen">Load FEN</button>
        <textarea id="ioText" placeholder="PGN or FEN here"></textarea>
      </div>
    </section>
  </main>
  <script src="js/host-capabilities.js"></script>
  <script src="js/ui-id-hint.js"></script>
  <script src="js/ui-engine-bridge.js"></script>
  <script src="js/ui-eval-config.js"></script>
  <script src="js/ui-config.js"></script>
  <script src="js/ui-board.js"></script>
</body>
</html>
